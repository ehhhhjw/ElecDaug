(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c047d61"],{4656:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-s-help"}),e._v(" 激光雷达蜕变 ")]),a("el-breadcrumb-item",[e._v("添加生成任务")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"form-box"},[a("el-form",{ref:"formRef",attrs:{model:e.form,rules:e.rulesList,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"任务名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"任务类型",prop:"augmentation_method"}},[a("div",{staticStyle:{float:"left","margin-right":"5px"}},[a("el-select",{staticStyle:{width:"220px"},attrs:{placeholder:"请选择生成方法"},on:{change:e.methodChanged},model:{value:e.form.augmentation_method,callback:function(t){e.$set(e.form,"augmentation_method",t)},expression:"form.augmentation_method"}},e._l(this.methods,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("div",{staticStyle:{float:"left"}},[a("el-popover",{staticStyle:{float:"left"},attrs:{placement:"right-start",title:"生成方法说明:",width:"200",trigger:"hover",content:"请注意：在场景物体添加蜕变功能中，若您所提供的场景不足以达到您所指定的扩增数量时，算法会返回该场景所能扩增的最大数量，其可能为0（即该场景无法扩增）。极端场景蜕变功能同理。"}},[a("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1)]),10==e.params_id||11==e.params_id||12==e.params_id?a("el-form-item",{attrs:{label:"紧急等级"}},[a("div",{staticStyle:{float:"left","margin-right":"5px",width:"300px"}},[a("el-slider",{attrs:{min:1,max:5,step:1,marks:e.mark_group.marks1_5},model:{value:e.form.urgency_level,callback:function(t){e.$set(e.form,"urgency_level",t)},expression:"form.urgency_level"}})],1),a("div",{staticStyle:{float:"left"}},[a("el-popover",{staticStyle:{float:"left"},attrs:{placement:"right-start",title:"紧急等级:",width:"200",trigger:"hover",content:"任务的紧急程度，系统会根据紧急等级对任务进行调度"}},[a("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1)]):e._e(),10==e.params_id?a("el-form-item",{attrs:{label:"生成卡车类型",prop:"aug_object_Truck"}},[a("div",{staticStyle:{float:"left","margin-right":"5px"}},[a("el-select",{attrs:{placeholder:"请选择生成卡车类型"},model:{value:e.form.aug_object_Truck,callback:function(t){e.$set(e.form,"aug_object_Truck",t)},expression:"form.aug_object_Truck"}},e._l(e.truck_options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticStyle:{float:"left"}},[a("el-popover",{staticStyle:{float:"left"},attrs:{placement:"right-start",title:"生成卡车类型:",width:"200",trigger:"hover",content:"选择不同的卡车型号作为扩增物体。不同卡车对应物体长宽高、点云数、形状均不同，目前提供三种卡车型号"}},[a("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1)]):e._e(),10==e.params_id&&e.form.aug_object_Truck?a("el-form-item",{attrs:{label:"生成卡车数量",prop:"aug_count_Truck"}},[a("el-slider",{attrs:{"show-input":""},model:{value:e.form.aug_count_Truck,callback:function(t){e.$set(e.form,"aug_count_Truck",t)},expression:"form.aug_count_Truck"}})],1):e._e(),10==e.params_id?a("el-form-item",{attrs:{label:"生成轿车类型",prop:"aug_object_Car"}},[a("div",{staticStyle:{float:"left","margin-right":"5px"}},[a("el-select",{attrs:{placeholder:"请选择生成轿车类型"},model:{value:e.form.aug_object_Car,callback:function(t){e.$set(e.form,"aug_object_Car",t)},expression:"form.aug_object_Car"}},e._l(e.car_options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticStyle:{float:"left"}},[a("el-popover",{staticStyle:{float:"left"},attrs:{placement:"right-start",title:"生成轿车类型:",width:"200",trigger:"hover",content:"选择不同的轿车型号作为扩增物体。不同轿车对应物体长宽高、点云数、形状均不同，目前仅提供一种轿车型号"}},[a("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1)]):e._e(),10==e.params_id&&e.form.aug_object_Car?a("el-form-item",{attrs:{label:"生成轿车数量",prop:"aug_count_Car"}},[a("el-slider",{attrs:{"show-input":""},model:{value:e.form.aug_count_Car,callback:function(t){e.$set(e.form,"aug_count_Car",t)},expression:"form.aug_count_Car"}})],1):e._e(),10==e.params_id?a("el-form-item",{attrs:{label:"生成自行车类型",prop:"aug_object_Cyclist"}},[a("div",{staticStyle:{float:"left","margin-right":"5px"}},[a("el-select",{attrs:{placeholder:"请选择生成自行车类型"},model:{value:e.form.aug_object_Cyclist,callback:function(t){e.$set(e.form,"aug_object_Cyclist",t)},expression:"form.aug_object_Cyclist"}},e._l(e.cyclist_options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticStyle:{float:"left"}},[a("el-popover",{staticStyle:{float:"left"},attrs:{placement:"right-start",title:"生成自行车类型:",width:"200",trigger:"hover",content:"选择不同的自行车型号作为扩增物体。不同自行车对应物体长宽高、点云数、形状均不同，目前提供两种自行车型号"}},[a("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1)]):e._e(),10==e.params_id&&e.form.aug_object_Cyclist?a("el-form-item",{attrs:{label:"生成自行车数量",prop:"aug_count_Cyclist"}},[a("el-slider",{attrs:{"show-input":""},model:{value:e.form.aug_count_Cyclist,callback:function(t){e.$set(e.form,"aug_count_Cyclist",t)},expression:"form.aug_count_Cyclist"}})],1):e._e(),11==e.params_id?a("el-form-item",{attrs:{label:"物体旋转角度",prop:"angle"}},[a("div",{staticStyle:{float:"left","margin-right":"5px",width:"400px"}},[a("el-slider",{attrs:{"show-input":"",min:-180,max:180,step:.5,marks:e.marks},model:{value:e.form.angle,callback:function(t){e.$set(e.form,"angle",t)},expression:"form.angle"}})],1),a("div",{staticStyle:{float:"left"}},[a("el-popover",{staticStyle:{float:"left"},attrs:{placement:"right-start",title:"物体旋转角度:",width:"200",trigger:"hover",content:"对场景中标签所含的所有物体进行旋转角度的选择"}},[a("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1)]):e._e(),12==e.params_id?a("el-form-item",{attrs:{label:"是否加入卡车"}},[a("div",{staticStyle:{float:"left","margin-right":"5px"}},[a("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:e.form.aug_Truck,callback:function(t){e.$set(e.form,"aug_Truck",t)},expression:"form.aug_Truck"}})],1),a("div",{staticStyle:{float:"left"}},[a("el-popover",{staticStyle:{float:"left"},attrs:{placement:"right-start",title:"是否加入卡车:",width:"210",trigger:"hover",content:"选择生成的极端场景中是否包含大量卡车"}},[a("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1)]):e._e(),12==e.params_id?a("el-form-item",{attrs:{label:"是否加入轿车"}},[a("div",{staticStyle:{float:"left","margin-right":"5px"}},[a("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:e.form.aug_Car,callback:function(t){e.$set(e.form,"aug_Car",t)},expression:"form.aug_Car"}})],1),a("div",{staticStyle:{float:"left"}},[a("el-popover",{staticStyle:{float:"left"},attrs:{placement:"right-start",title:"是否加入轿车:",width:"210",trigger:"hover",content:"选择生成的极端场景中是否包含大量轿车"}},[a("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1)]):e._e(),12==e.params_id?a("el-form-item",{attrs:{label:"是否加入自行车"}},[a("div",{staticStyle:{float:"left","margin-right":"5px"}},[a("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:e.form.aug_Cyclist,callback:function(t){e.$set(e.form,"aug_Cyclist",t)},expression:"form.aug_Cyclist"}})],1),a("div",{staticStyle:{float:"left"}},[a("el-popover",{staticStyle:{float:"left"},attrs:{placement:"right-start",title:"是否加入自行车:",width:"210",trigger:"hover",content:"选择生成的极端场景中是否包含大量自行车"}},[a("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1)]):e._e(),10==e.params_id||11==e.params_id||12==e.params_id?a("el-form-item",{attrs:{label:"上传文件"}},[a("input",{ref:"lidar_t_file_ref",attrs:{type:"file",id:"filetemp",prop:"form.file"},on:{change:e.fileLoad}}),a("el-popover",{staticStyle:{"white-space":"pre-wrap"},attrs:{placement:"right-start",title:"该方法所需上传文件类型限制为 .zip 类型。文件结构如下（旋转功能无需planes）:",width:"200",trigger:"hover"}},[a("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"}),a("img",{staticClass:"user-avator",attrs:{src:r("b42f"),alt:""}})]),a("br")],1):e._e(),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:e.is_available_to_submit,loading:e.loading,"element-loading-spinner":"el-icon-loading","element-loading-text":"提交中"},on:{click:e.onSubmit}},[e._v("表单提交")])],1)],1)],1)])])},i=[],o=(r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("6b54"),r("768b")),l=(r("ac6a"),r("7f7f"),r("96cf"),r("3b8d")),n=(r("a481"),r("7618"));r("28a5"),r("3b2b"),r("4328");function s(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,n=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){n=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(n)throw o}}}}function c(e,t){if(e){if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var m={name:"baseform",inject:["reload"],data:function(){var e=function(e,t,r){t<1?r(new Error("只能为大于等于1整数")):r()},t=function(e,t,r){var a=/^[0-9]*$/;a.test(t)?r():r(new Error("只能为非负数字"))},r=function(e,t,r){t<0?r(new Error("只能为非负数")):r()},a=function(e,t,r){var a=t.split(",");for(var i in a)"number"===!Object(n["a"])(parseFloat(a[i]))&&!isNaN(parseFloat(a[i]))&&parseFloat(a[i])<0?r(new Error("请填写合理的非负数字列表")):r()};return{marks:{0:"0"},mark_group:{marks1_2:{1:"1",2:"2"},marks0001_2:{.001:"0.001",2:"2"},marks0001_1:{.001:"0.001",1:"1"},marks1_100:{1:"1",100:{style:{width:"30px"},label:"100"}},marks1_1000:{1:"1",1e3:{style:{width:"40px"},label:"1000"}},marks1_15000:{1:"1",15e3:{style:{width:"50px"},label:"15000"}},marks0_5:{0:"0",5:"5"},marks1_5:{1:"1",5:"5"}},value:0,loading:!1,form:{name:"",augmentation_method:null,aug_object_Car:null,aug_count_Car:0,aug_object_Truck:null,aug_count_Truck:0,aug_object_Cyclist:null,aug_count_Cyclist:0,angle:0,aug_Car:!0,aug_Truck:!0,aug_Cyclist:!0,master:this.$store.state.userId,urgency_level:0,file:{}},methods:[],truck_options:[{value:"1",label:"类型1"},{value:"2",label:"类型2"},{value:"3",label:"类型3"}],car_options:[{value:"1",label:"类型1"}],cyclist_options:[{value:"1",label:"类型1"},{value:"2",label:"类型2"}],fileList:[],typeList:[],params_id:0,is_available_to_submit:!0,rules1:{augmentation_method:[{required:!0,message:"不能为空",trigger:"change"}],epsilon:[{required:!0,message:"不能为空",trigger:"blur"},{validator:a,trigger:"blur"}],generate_per_file_and_params:[{required:!0,message:"请输入数字",trigger:"blur"},{validator:e,trigger:"blur"},{validator:t,trigger:"blur"}]},rules2:{augmentation_method:[{required:!0,message:"不能为空",trigger:"change"}],ite_epsilon2:[{required:!0,message:"请输入数字",trigger:"blur"},{validator:r,trigger:"blur"}],ite_limit:[{required:!0,message:"请输入数字",trigger:"blur"},{validator:t,trigger:"blur"}],generate_per_file:[{required:!0,message:"请输入数字",trigger:"blur"},{validator:e,trigger:"blur"},{validator:t,trigger:"blur"}]},rules3:{augmentation_method:[{required:!0,message:"不能为空",trigger:"change"}],ite_epsilon3:[{required:!0,message:"请输入数字",trigger:"blur"},{validator:r,trigger:"blur"}],ite_limit:[{required:!0,message:"请输入数字",trigger:"blur"},{validator:t,trigger:"blur"}],generate_per_file:[{required:!0,message:"请输入数字",trigger:"blur"},{validator:e,trigger:"blur"},{validator:t,trigger:"blur"}],boundary_constraint:[{required:!0,message:"请输入数字",trigger:"blur"},{validator:r,trigger:"blur"}]}}},computed:{rulesList:function(){return 10===this.params_id?this.rules1:11===this.params_id?this.rules2:12===this.params_id?this.rules3:void 0}},methods:{trim:function(e){return e.replace(/(^s*)|(s*$)/g,"")},onSubmit:function(){var e=this;this.loading=!0,this.form.master=this.$store.state.userId,this.$refs.formRef.validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(r){var a,i,l,n,c,u,m,f,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=52;break}if(""!==e.form.augmentation_method){t.next=4;break}return e.loading=!1,t.abrupt("return",e.$message.error("请选择生成方法!"));case 4:if(a=new FormData,e.form.name&&a.append("name",e.form.name),a.append("augmentation_method",e.form.augmentation_method),a.append("master",e.form.master),a.append("urgency_level",e.form.urgency_level+""),i={},10!==e.form.augmentation_method){t.next=17;break}if(e.form.aug_count_Car+e.form.aug_count_Truck+e.form.aug_count_Cyclist!==0){t.next=14;break}return e.loading=!1,t.abrupt("return",e.$message.error("添加数量不可为0！"));case 14:i={aug_object_car:e.form.aug_object_Car?e.form.aug_object_Car:"1",aug_object_truck:e.form.aug_object_Truck?e.form.aug_object_Truck:"1",aug_object_cyclist:e.form.aug_object_Cyclist?e.form.aug_object_Cyclist:"1",aug_count_car:e.form.aug_count_Car+"",aug_count_truck:e.form.aug_count_Truck+"",aug_count_cyclist:e.form.aug_count_Cyclist+""},t.next=29;break;case 17:if(11!==e.form.augmentation_method){t.next=24;break}if(0!==e.form.angle){t.next=21;break}return e.loading=!1,t.abrupt("return",e.$message.error("旋转角度不可为0！"));case 21:i={angle:e.form.angle+""},t.next=29;break;case 24:if(12!==e.form.augmentation_method){t.next=29;break}if(e.form.aug_Car||e.form.aug_Truck||e.form.aug_Cyclist){t.next=28;break}return e.loading=!1,t.abrupt("return",e.$message.error("请选择添加物体！"));case 28:i={aug_Car:e.form.aug_Car,aug_Truck:e.form.aug_Truck,aug_Cyclist:e.form.aug_Cyclist};case 29:if(i=JSON.stringify(i),a.append("params",i),e.form.file=document.getElementById("filetemp").files[0],console.log("this.form.file:",e.form.file),!e.form.file){t.next=37;break}a.append("file",e.form.file),t.next=39;break;case 37:return e.loading=!1,t.abrupt("return",e.$message.error("请上传文件！"));case 39:l=s(a.entries());try{for(l.s();!(n=l.n()).done;)c=Object(o["a"])(n.value,2),u=c[0],m=c[1],console.log(u,m)}catch(_){l.e(_)}finally{l.f()}return t.next=43,e.$http({url:"/task/",data:a,method:"post"});case 43:if(f=t.sent,g=f.data,2e4===g.code){t.next=48;break}return e.loading=!1,t.abrupt("return",e.$message.error("添加生成任务失败！错误原因："+g.msg));case 48:e.$message.success("提交成功！"),e.reload(),t.next=53;break;case 52:e.loading=!1;case 53:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},methodChanged:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.params_id=t,this.form.augmentation_method=this.params_id,console.log("this.params_id:",this.params_id),this.is_available_to_submit=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),fileLoad:function(){var e=this.$refs.lidar_t_file_ref.files[0],t=e.name,r=t.lastIndexOf("."),a=t.substring(r,t.length);if(console.log(a,a.toLowerCase()),console.log("lastName:",a),".zip"!==a.toLowerCase())return this.$message.error("文件必须为 .zip 类型"),this.$refs.lidar_t_file_ref.value="",!1;this.form.file=e},clickLoad:function(){this.$refs.refFile.dispatchEvent(new MouseEvent("click"))},getTypeList:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/augmentation_type/");case 2:if(t=e.sent,r=t.data,2e4===r.code){e.next=6;break}return e.abrupt("return",this.$message.error("获取任务列表失败！错误原因："+r.msg));case 6:this.typeList=r.data;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.commit("setUserId",sessionStorage.getItem("userId")),t=2,e.next=4,this.$http.get("/augmentation_method/?augmentation_type="+t);case 4:if(r=e.sent,a=r.data,45e3!==a.code){e.next=8;break}return e.abrupt("return",this.$message.error("该生成类型暂无方法！"));case 8:if(2e4===a.code){e.next=10;break}return e.abrupt("return",this.$message.error("查询生成方法失败！"));case 10:this.methods=a.data.filter((function(e){return e.augmentation_type_id===t})),console.log("this.methods:",this.methods);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),created:function(){this.getTypeList()}},f=m,g=(r("4e91"),r("2877")),_=Object(g["a"])(f,a,i,!1,null,"41d57754",null);t["default"]=_.exports},"4e91":function(e,t,r){"use strict";r("5eaf")},"5eaf":function(e,t,r){},b42f:function(e,t,r){e.exports=r.p+"static/img/lidar_t_upload_file.88f4f63a.jpg"}}]);